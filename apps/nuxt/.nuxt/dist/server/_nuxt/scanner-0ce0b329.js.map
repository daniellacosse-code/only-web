{"version":3,"file":"scanner-0ce0b329.js","sources":["../../../../pages/scanner.vue"],"sourcesContent":["<script setup>\nconst {\n  public: {\n    scanner: { readoutTextDefault, decoderReaders }\n  }\n} = useAppConfig();\nconst nuxtApp = useNuxtApp();\n\nconst scanner = ref(null);\nconst data = ref(\"\");\nconst isLoading = ref(true);\n\nonMounted(async () => {\n  await nextTick();\n\n  nuxtApp.$quagga.init(\n    {\n      decoder: {\n        readers: decoderReaders\n      },\n      inputStream: {\n        name: \"Live\",\n        target: scanner.value,\n        type: \"LiveStream\"\n      }\n    },\n    (error) => {\n      if (error) return alert(error);\n\n      nuxtApp.$quagga.onDetected(({ codeResult }) => {\n        requestAnimationFrame(() => (data.value = codeResult.code));\n      });\n\n      nuxtApp.$quagga.start();\n      isLoading.value = false;\n    }\n  );\n});\n\nonUnmounted(() => nuxtApp.$quagga?.stop());\n</script>\n\n<template>\n  <div class=\"Quagga\">\n    <div\n      :class=\"{ Quagga__scanner: true, 'Quagga__scanner--loading': isLoading }\"\n      ref=\"scanner\"\n    ></div>\n    <pre>{{ isLoading ? \"Loading...\" : data || readoutTextDefault }}</pre>\n  </div>\n</template>\n\n<!-- scoping doesn't work with the injected drawing buffer canvas -->\n<style>\n.Quagga {\n  display: flex;\n  flex-direction: column;\n  margin: auto;\n}\n\n.Quagga__scanner {\n  display: flex;\n  justify-content: center;\n  position: relative;\n  opacity: 1;\n  transition: opacity ease 350ms;\n}\n\n.Quagga__scanner--loading {\n  min-height: 480px;\n  opacity: 0;\n}\n\n.Quagga__scanner > .drawingBuffer {\n  position: absolute;\n  left: 0;\n}\n\n.Quagga__scanner > video {\n  width: 100%;\n  max-width: var(--device-width-tablet);\n  object-fit: contain;\n}\n\n.Quagga > pre {\n  font-family: var(--font-monospace);\n  padding: var(--size-default);\n  color: var(--color-text);\n  cursor: inherit;\n  background: var(--color-highlight);\n  text-align: center;\n}\n</style>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AACA,UAAA;AAAA,MACA,QAAA;AAAA,QACA,SAAA,EAAA,oBAAA,eAAA;AAAA,MACA;AAAA,IACA,IAAA,aAAA;AACA,UAAA,UAAA,WAAA;AAEA,QAAA,IAAA;AACA,UAAA,OAAA,IAAA,EAAA;AACA,UAAA,YAAA,IAAA,IAAA;AA6BA,gBAAA;;AAAA,2BAAA,YAAA,mBAAA;AAAA,KAAA;;;;;;;;;;;;"}