import{w as O,a as V,r as l,l as q,f as o,h as s,F as L,m as A,u,p as M,q as N,v as b,s as D,t as P,_ as F,o as r,x as U}from"./entry.872d718e.js";import{_ as j}from"./_plugin-vue_export-helper.c27b6911.js";const z={class:"Music"},G={class:"MusicNotes__container"},H={class:"MusicNotes"},J={class:"MusicInputs"},K=["disabled"],Q={__name:"music",async setup(W){let i,I;const{playChord:S,parseChord:E}=([i,I]=O(()=>F(()=>import("./index.3d714ceb.js"),[],import.meta.url)),i=await i,I(),i),{public:{music:c,MILLISECONDS_PER_SECOND:C,SECONDS_PER_MINUTE:k}}=V();let p=0,d=[],x=null;const m=l(!1),y=l(!1),n=l(c.playerChordInstructionsDefault),_=l(null),v=l(c.playerNoteReadoutDefault),f=l(c.playerBeatsPerMinuteDefault),h=q(()=>C*k/f.value);function R(){y.value=!0,d=n.value.split(/\s+/).reverse(),x=setInterval(B,h.value)}function w(t){const e=n.value.indexOf(t,p);p=e+t.length,_.value.setSelectionRange(e,p),_.value.focus()}async function B(){[m.value,y.value]=[!0,!1];const t=d.pop();t&&(d.length||setTimeout(g,h.value),w(t),v.value=E(t),await S(v.value,(h.value/C).toFixed(1)))}function g(){clearInterval(x),[m.value,p,v.value,d]=[!1,0,c.playerNoteReadoutDefault,[]],_.value.blur()}return(t,e)=>(r(),o("div",z,[s("div",G,[s("ol",H,[(r(!0),o(L,null,A(u(v),(a,T)=>(r(),o("li",{class:"MusicNote",key:a+T},U(a),1))),128))])]),s("fieldset",J,[s("label",null,[M(" Chords "),N(s("textarea",{type:"textarea","onUpdate:modelValue":e[0]||(e[0]=a=>D(n)?n.value=a:null),ref_key:"chordInstructionsInput",ref:_},null,512),[[b,u(n)]])]),s("label",null,[M(" Beats per minute (BPM) "),N(s("input",{class:"MusicInput",type:"number","onUpdate:modelValue":e[1]||(e[1]=a=>D(f)?f.value=a:null),min:"24",max:"300"},null,512),[[b,u(f)]])])]),u(m)?(r(),o("button",{key:0,onClick:e[2]||(e[2]=P(()=>g(),["stop","prevent"])),disabled:u(y)}," üõë cancel ",8,K)):(r(),o("button",{key:1,onClick:e[3]||(e[3]=P(()=>R(),["stop","prevent"]))},"‚ñ∂Ô∏è play"))]))}},Z=j(Q,[["__scopeId","data-v-5304176e"]]);export{Z as default};
